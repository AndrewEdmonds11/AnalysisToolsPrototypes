// Generic configurations for cuts
open class Cut {
      variable : ""
      comparator : String = "noOp"
      value : Float = 0.0
}

class TimeCut extends Cut {
      variable : "time"
}

class MomCut extends Cut {
      variable : "time"
}

//class EntranceCut extends Cut {
//      variable : SurfaceId
//      comparator : "=="
//      value : 0
//}

// Generic configurations for hists
open class Hist {
      name : String = "default_name"
      title : String = "default_title"
      min_x : Float = 0.0
      max_x : Float(this>min_x) = 0.0
      bin_width : Float(this>0) = 0.0
      variable : ""
      cut : Cut
}

class MomHist extends Hist {
      min_x = 90.0
      max_x = 110.0
      bin_width = 0.5
      variable : "momentum"
}

class TimeHist extends Hist {
      min_x = 0.0
      max_x = 1700.0
      bin_width = 10.0
      variable : "time"
}

class SurfaceIdHist extends Hist {
      min_x = 0.0
      max_x = 10.0
      bin_width = 1.0
      variable : "surfaceId"
}

// Configure the histograms we want
hidden n_hists = 5
hidden i_hists = IntSeq(0, n_hists-1) // "hidden" because IntSeq cannot be interpreted by JSON
hidden time_cut_values { for (i_hist in i_hists) { 500.0+i_hist*100.0 } }
hidden mom_cut_values { for (i_hist in i_hists) { 95.0+i_hist } }

hists {
  new MomHist {
      name = "hRecoMom"
      title = "Reco Mom (no cuts)"
  }
  for (time_cut_val in time_cut_values) {
      new MomHist {
      	cut  = new TimeCut { comparator = ">" value = time_cut_val }
        name = "hRecoMom_gt"+time_cut_val.toInt().toString()+"ns"
	title = "Reco Mom (t " + cut.comparator + " "+time_cut_val.toInt().toString()+" ns)"
      }
      new MomHist {
      	cut = new TimeCut { comparator = "<" value = time_cut_val }
        name = "hRecoMom_lt"+time_cut_val.toInt().toString()+"ns"
	title = "Reco Mom (t " + cut.comparator + " "+time_cut_val.toInt().toString()+" ns)"
      }
  }

  new TimeHist {
      name = "hTime"
      title = "Time (no cuts)"
  }

  for (mom_cut_val in mom_cut_values) {
      new TimeHist {
      	cut = new MomCut { comparator = ">" value = mom_cut_val }
        name = "hTime_gt"+mom_cut_val.toInt().toString()+"MeV"
	title = "Reco Mom (p " + cut.comparator + " "+mom_cut_val.toInt().toString()+" MeV/c)"
      }
      new TimeHist {
      	cut = new MomCut { comparator = "<" value = mom_cut_val }
        name = "hTime_lt"+mom_cut_val.toInt().toString()+"MeV"
	title = "Reco Mom (p " + cut.comparator + " "+mom_cut_val.toInt().toString()+" MeV/c)"
      }
  }

  new SurfaceIdHist {
      name = "hSurfaceId"
      title = "Surface ID"
  }
}